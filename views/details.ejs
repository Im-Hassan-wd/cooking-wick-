<%- include('./partials/head.ejs') %>

<header>
  <nav class="container">
      <h1><a href="/">Cooking Wick</a></h1>
  </nav>
</header>

<div class="container details">
    <h2><%- recipe.title %></h2>
    <div class="content">
        <p><span>ingredients: </span><%- recipe.ingredient %></p>
        <p><span>method: </span><%- recipe.method %></p>
        <p><span>cooking time: </span><%- recipe.cookingTime %> minute(s)</p>
        <a class="delete" data-id="<%= recipe._id %>">delete</a>
    </div>
</div>

<script>
    const deleteBtn = document.querySelector('a.delete');

    deleteBtn.addEventListener('click', (e) => {
      const endpoint = `/recipes/${deleteBtn.dataset.id}`;
      
      fetch(endpoint, {
        method: 'DELETE'
      })
      .then((response) => response.json())
      .then(data => console.log(data))
      .catch((err) => console.log(err))
    })
</script>

<%- include('./partials/footer.ejs') %>